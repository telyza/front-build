(self.webpackChunktelyza=self.webpackChunktelyza||[]).push([[713],{91374:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>g,xk:()=>y});var r=t(80033),o=t(42993),s=t(14829),i=t(49502),a=t(57483),l=t(60519),c=t(91706),d=t(96446),h=t(77628),p=t(16103),x=t(26240),u=t(90310),m=t(70579);function v(){const e=(0,x.A)();return(0,m.jsx)(p.A,{styles:{".yarl__root":{"--yarl__thumbnails_thumbnail_padding":0,"--yarl__thumbnails_thumbnail_border":"transparent","--yarl__color_backdrop":(0,u.X4)(e.palette.grey[900],.9),"--yarl__slide_captions_container_background":(0,u.X4)(e.palette.grey[900],.48)},".yarl__slide_title":{fontSize:e.typography.h5.fontSize,fontWeight:e.typography.h5.fontWeight,lineHeight:e.typography.h5.lineHeight},".yarl__slide_description":{fontSize:e.typography.body2.fontSize,fontWeight:e.typography.body2.fontWeight,lineHeight:e.typography.body2.lineHeight},".yarl__button":{filter:"unset"},".yarl__thumbnails_thumbnail":{opacity:.48,"&.yarl__thumbnails_thumbnail_active":{opacity:1}},".yarl__thumbnails_vignette":{"--yarl__thumbnails_vignette_size":0},".yarl__video_container":{backgroundColor:e.palette.common.black}}})}function g(e){let{slides:n,disabledZoom:t,disabledVideo:r,disabledTotal:o,disabledCaptions:s,disabledSlideshow:i,disabledThumbnails:a,disabledFullscreen:l,onGetCurrentIndex:d,...p}=e;const x=n?n.length:0;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(v,{}),(0,m.jsx)(c.Ay,{slides:n,animation:{swipe:240},carousel:{finite:x<5},controller:{closeOnBackdropClick:!0},plugins:A({disabledZoom:t,disabledVideo:r,disabledCaptions:s,disabledSlideshow:i,disabledThumbnails:a,disabledFullscreen:l}),on:{view:e=>{let{index:n}=e;d&&d(n)}},toolbar:{buttons:[(0,m.jsx)(j,{totalItems:x,disabledTotal:o},0),"close"]},render:{iconClose:()=>(0,m.jsx)(h.A,{width:24,icon:"carbon:close"}),iconZoomIn:()=>(0,m.jsx)(h.A,{width:24,icon:"carbon:zoom-in"}),iconZoomOut:()=>(0,m.jsx)(h.A,{width:24,icon:"carbon:zoom-out"}),iconSlideshowPlay:()=>(0,m.jsx)(h.A,{width:24,icon:"carbon:play"}),iconSlideshowPause:()=>(0,m.jsx)(h.A,{width:24,icon:"carbon:pause"}),iconPrev:()=>(0,m.jsx)(h.A,{width:32,icon:"carbon:chevron-left"}),iconNext:()=>(0,m.jsx)(h.A,{width:32,icon:"carbon:chevron-right"}),iconExitFullscreen:()=>(0,m.jsx)(h.A,{width:24,icon:"carbon:center-to-fit"}),iconEnterFullscreen:()=>(0,m.jsx)(h.A,{width:24,icon:"carbon:fit-to-screen"})},...p})]})}function A(e){let{disabledZoom:n,disabledVideo:t,disabledCaptions:c,disabledSlideshow:d,disabledThumbnails:h,disabledFullscreen:p}=e,x=[s.A,a.A,i.A,l.A,o.A,r.A];return h&&(x=x.filter((e=>e!==l.A))),c&&(x=x.filter((e=>e!==s.A))),p&&(x=x.filter((e=>e!==a.A))),d&&(x=x.filter((e=>e!==i.A))),n&&(x=x.filter((e=>e!==r.A))),t&&(x=x.filter((e=>e!==o.A))),x}function j(e){let{totalItems:n,disabledTotal:t}=e;const{currentIndex:r}=(0,c.mp)();return t?null:(0,m.jsxs)(d.A,{component:"span",className:"yarl__button",sx:{typography:"body2",alignItems:"center",display:"inline-flex",justifyContent:"center"},children:[(0,m.jsxs)("strong",{children:[" ",r+1," "]})," / ",n]})}var b=t(65043);function y(e){const[n,t]=(0,b.useState)(-1);return{selected:n,open:n>=0,onOpen:(0,b.useCallback)((n=>{const r=e.findIndex((e=>"video"===e.type?e.poster===n:e.src===n));t(r)}),[e]),onClose:(0,b.useCallback)((()=>{t(-1)}),[]),setSelected:t}}},18526:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(94496),o=t(8555),s=t(70579);function i(e){let{query:n,sx:t,...i}=e;return n?(0,s.jsxs)(o.A,{sx:{bgcolor:"unset",textAlign:"center",...t},...i,children:[(0,s.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"Not Found"}),(0,s.jsxs)(r.A,{variant:"body2",children:["No results found for \xa0",(0,s.jsxs)("strong",{children:['"',n,'"']}),".",(0,s.jsx)("br",{})," Try checking for typos or using complete words."]})]}):(0,s.jsx)(r.A,{variant:"body2",sx:t,children:"Please enter keywords"})}},80713:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>Se});var r=t(49367),o=t(65043),s=t(12110),i=t(88911),a=t(19252),l=t(94496),c=t(27399),d=t(68713),h=t(21430),p=t(10871),x=t.n(p),u=t(95320),m=t(63132);const v={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};var g=t(2771),A=t(96446),j=t(58846),b=t(26240),y=t(67784),f=t(71716),w=t(51787),k=t(5537),C=t(17861),I=t(77628),S=t(91691);function _(){const[e,n]=(0,o.useState)(!1),[t,r]=(0,o.useState)(!1),s=(0,o.useCallback)((()=>{r((e=>!e))}),[]),i=(0,o.useCallback)((()=>{r(!1)}),[]);return{openMobile:e,collapseDesktop:t,onOpenMobile:(0,o.useCallback)((()=>{n(!0)}),[]),onCloseMobile:(0,o.useCallback)((()=>{n(!1)}),[]),onCloseDesktop:i,onCollapseDesktop:s}}var T=t(1413),E=t(19668),O=t(60587),R=t(46936),z=t(26353),F=t(38968),P=t(70579);function N(e){let{selected:n,collapse:t,conversation:r,onCloseMobile:s}=e;const{user:a}=(0,h.E)(),p=(0,C.Q)("up","md"),x=(0,d.rd)(),{group:v,displayName:g,displayText:j,participants:b,lastActivity:y,hasOnlineInGroup:f}=function(e){let{currentUserId:n,conversation:t}=e;const{messages:r,participants:o}=t,s=o.filter((e=>e.id!==n)),i=r[r.length-1],a=s.length>1,l=s.map((e=>e.name)).join(", "),c=!!a&&s.map((e=>e.status)).includes("online");let d="";if(i){const e=i.senderId===n?"You: ":"",t="image"===i.contentType?"Sent a photo":i.body;d="".concat(e).concat(t)}return{group:a,displayName:l,displayText:d,participants:s,lastActivity:i.createdAt,hasOnlineInGroup:c}}({conversation:r,currentUserId:"".concat(null===a||void 0===a?void 0:a.id)}),w=b[0],{name:k,avatarUrl:I,status:S}=w,_=(0,o.useCallback)((async()=>{try{p||s(),await async function(e){const n=m.vZ.chat;(0,u.Tk)([n,{params:{endpoint:"conversations"}}],(n=>{const t=n.conversations.map((n=>n.id===e?{...n,unreadCount:0}:n));return{...n,conversations:t}}),!1)}(r.id),x.push("".concat(c.f.dashboard.chat,"?id=").concat(r.id))}catch(e){console.error(e)}}),[r.id,p,s,x]),N=(0,P.jsx)(E.A,{variant:f?"online":"invisible",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,P.jsx)(R.A,{variant:"compact",sx:{width:48,height:48},children:b.slice(0,2).map((e=>(0,P.jsx)(O.A,{alt:e.name,src:e.avatarUrl},e.id)))})}),L=(0,P.jsx)(E.A,{variant:S,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,P.jsx)(O.A,{alt:k,src:I,sx:{width:48,height:48}})},S);return(0,P.jsxs)(F.A,{disableGutters:!0,onClick:_,sx:{py:1.5,px:2.5,...n&&{bgcolor:"action.selected"}},children:[(0,P.jsx)(E.A,{color:"error",overlap:"circular",badgeContent:t?r.unreadCount:0,children:v?N:L}),!t&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(z.A,{sx:{ml:2},primary:g,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:j,secondaryTypographyProps:{noWrap:!0,component:"span",variant:r.unreadCount?"subtitle2":"body2",color:r.unreadCount?"text.primary":"text.secondary"}}),(0,P.jsxs)(i.A,{alignItems:"flex-end",sx:{ml:2,height:44},children:[(0,P.jsx)(l.A,{noWrap:!0,variant:"body2",component:"span",sx:{mb:1.5,fontSize:12,color:"text.disabled"},children:(0,T.A)(new Date(y),{addSuffix:!1})}),!!r.unreadCount&&(0,P.jsx)(A.A,{sx:{width:8,height:8,bgcolor:"info.main",borderRadius:"50%"}})]})]})]})}var L=t(39336),M=t(77739),U=t(94814),W=t(59106),G=t(92546),D=t(24629),q=t(69995);function V(){var e;const{user:n}=(0,h.E)(),t=(0,q.f)(),[r,s]=(0,o.useState)("online"),a=(0,o.useCallback)((e=>{s(e.target.value)}),[]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(E.A,{variant:r,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,P.jsx)(O.A,{src:null===n||void 0===n?void 0:n.photoURL,alt:null===n||void 0===n?void 0:n.displayName,onClick:t.onOpen,sx:{cursor:"pointer",width:48,height:48},children:null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e.charAt(0).toUpperCase()})}),(0,P.jsxs)(q.A,{open:t.open,onClose:t.onClose,arrow:"top-left",sx:{p:0},children:[(0,P.jsxs)(i.A,{direction:"row",alignItems:"center",spacing:2,sx:{py:2,pr:1,pl:2.5},children:[(0,P.jsx)(z.A,{primary:null===n||void 0===n?void 0:n.displayName,secondary:null===n||void 0===n?void 0:n.email,secondaryTypographyProps:{component:"span"}}),(0,P.jsx)(M.A,{title:"Log out",children:(0,P.jsx)(f.A,{color:"error",children:(0,P.jsx)(I.A,{icon:"ic:round-power-settings-new"})})})]}),(0,P.jsx)(L.A,{sx:{borderStyle:"dashed"}}),(0,P.jsxs)(i.A,{sx:{p:1},children:[(0,P.jsxs)(U.A,{children:[(0,P.jsx)(E.A,{variant:r,sx:{["& .".concat(G.A.badge)]:{position:"static",m:.75,width:12,height:12,flexShrink:0}}}),(0,P.jsx)(D.A,{native:!0,fullWidth:!0,value:r,onChange:a,input:(0,P.jsx)(W.Ay,{sx:{pl:2}}),inputProps:{sx:{textTransform:"capitalize"}},children:["online","alway","busy","offline"].map((e=>(0,P.jsx)("option",{value:e,children:e},e)))})]}),(0,P.jsxs)(U.A,{children:[(0,P.jsx)(I.A,{icon:"solar:user-id-bold",width:24}),"Profile"]}),(0,P.jsxs)(U.A,{children:[(0,P.jsx)(I.A,{icon:"eva:settings-2-fill",width:24}),"Settings"]})]})]})]})}var X=t(78185);function Z(e){let{sx:n,...t}=e;return(0,P.jsxs)(i.A,{spacing:2,direction:"row",alignItems:"center",sx:{px:2.5,py:1.5,...n},...t,children:[(0,P.jsx)(X.A,{variant:"circular",sx:{width:48,height:48}}),(0,P.jsxs)(i.A,{spacing:1,flexGrow:1,children:[(0,P.jsx)(X.A,{sx:{width:.75,height:10}}),(0,P.jsx)(X.A,{sx:{width:.5,height:10}})]})]})}var H=t(18526);function Q(e){let{query:n,results:t,onClickResult:r}=e;const o=t.length,s=!o&&!!n;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{variant:"h6",sx:{px:2.5,mb:2},children:["Contacts (",o,")"]}),s?(0,P.jsx)(H.A,{query:n,sx:{p:3,mx:"auto",width:"calc(100% - 40px)",bgcolor:"background.neutral"}}):(0,P.jsx)(P.Fragment,{children:t.map((e=>(0,P.jsxs)(F.A,{onClick:()=>r(e),sx:{px:2.5,py:1.5,typography:"subtitle2"},children:[(0,P.jsx)(O.A,{alt:e.name,src:e.avatarUrl,sx:{mr:2}}),e.name]},e.id)))})]})}const B=320,K=96;function Y(e){let{loading:n,contacts:t,conversations:r,selectedConversationId:s}=e;const a=(0,b.A)(),l=(0,d.rd)(),h=(0,C.Q)("up","md"),{collapseDesktop:p,onCloseDesktop:x,onCollapseDesktop:u,openMobile:m,onOpenMobile:v,onCloseMobile:g}=_(),[T,E]=(0,o.useState)({query:"",results:[]});(0,o.useEffect)((()=>{h||x()}),[x,h]);const O=(0,o.useCallback)((()=>{h?u():g()}),[h,g,u]),R=(0,o.useCallback)((()=>{h||g(),l.push(c.f.dashboard.chat)}),[h,g,l]),z=(0,o.useCallback)((e=>{if(E((n=>({...n,query:e}))),e){const n=t.filter((n=>n.name.toLowerCase().includes(e)));E((e=>({...e,results:n})))}}),[t]),F=(0,o.useCallback)((()=>{E({query:"",results:[]})}),[]),L=(0,o.useCallback)((e=>{F(),l.push("".concat(c.f.dashboard.chat,"?id=").concat(e.id))}),[F,l]),M=(0,P.jsx)(f.A,{onClick:v,sx:{left:0,top:84,zIndex:9,width:32,height:32,position:"absolute",borderRadius:"0 12px 12px 0",bgcolor:a.palette.primary.main,boxShadow:a.customShadows.primary,color:a.palette.primary.contrastText,"&:hover":{bgcolor:a.palette.primary.darker}},children:(0,P.jsx)(I.A,{width:16,icon:"solar:users-group-rounded-bold"})}),U=(0,P.jsx)(P.Fragment,{children:[...Array(12)].map(((e,n)=>(0,P.jsx)(Z,{},n)))}),W=(0,P.jsx)(P.Fragment,{children:r.allIds.map((e=>(0,P.jsx)(N,{collapse:p,conversation:r.byId[e],selected:e===s,onCloseMobile:g},e)))}),G=(0,P.jsx)(Q,{query:T.query,results:T.results,onClickResult:L}),D=(0,P.jsx)(k.x,{onClickAway:F,children:(0,P.jsx)(y.A,{fullWidth:!0,value:T.query,onChange:e=>z(e.target.value),placeholder:"Search contacts...",InputProps:{startAdornment:(0,P.jsx)(w.A,{position:"start",children:(0,P.jsx)(I.A,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})},sx:{mt:2.5}})}),q=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"center",sx:{p:2.5,pb:0},children:[!p&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(V,{}),(0,P.jsx)(A.A,{sx:{flexGrow:1}})]}),(0,P.jsx)(f.A,{onClick:O,children:(0,P.jsx)(I.A,{icon:p?"eva:arrow-ios-forward-fill":"eva:arrow-ios-back-fill"})}),!p&&(0,P.jsx)(f.A,{onClick:R,children:(0,P.jsx)(I.A,{width:24,icon:"solar:user-plus-bold"})})]}),(0,P.jsx)(A.A,{sx:{p:2.5,pt:0},children:!p&&D}),(0,P.jsxs)(S.A,{sx:{pb:1},children:[T.query&&G,n&&U,!T.query&&!!r.allIds.length&&W]})]});return(0,P.jsxs)(P.Fragment,{children:[!h&&M,h?(0,P.jsx)(i.A,{sx:{height:1,flexShrink:0,width:B,borderRight:"solid 1px ".concat(a.palette.divider),transition:a.transitions.create(["width"],{duration:a.transitions.duration.shorter}),...p&&{width:K}},children:q}):(0,P.jsx)(j.Ay,{open:m,onClose:g,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:B}},children:q})]})}var J=t(9376),$=t.n(J),ee=t(20819),ne=t.n(ee),te=t(30279),re=t(18303),oe=t(83462),se=t(90310),ie=t(35316);function ae(e){let{participant:n,open:t,onClose:r}=e;return(0,P.jsxs)(oe.A,{fullWidth:!0,maxWidth:"xs",open:t,onClose:r,children:[(0,P.jsx)(f.A,{onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,P.jsx)(I.A,{icon:"mingcute:close-line"})}),(0,P.jsxs)(ie.A,{sx:{py:5,px:3,display:"flex"},children:[(0,P.jsx)(O.A,{alt:n.name,src:n.avatarUrl,sx:{width:96,height:96,mr:3}}),(0,P.jsxs)(i.A,{spacing:1,children:[(0,P.jsx)(l.A,{variant:"caption",sx:{color:"primary.main"},children:n.role}),(0,P.jsx)(l.A,{variant:"subtitle1",children:n.name}),(0,P.jsxs)(i.A,{direction:"row",sx:{typography:"caption",color:"text.disabled"},children:[(0,P.jsx)(I.A,{icon:"mingcute:location-fill",width:16,sx:{flexShrink:0,mr:.5,mt:"2px"}}),n.address]}),(0,P.jsxs)(i.A,{spacing:1,direction:"row",sx:{pt:1.5},children:[(0,P.jsx)(f.A,{size:"small",color:"error",sx:{borderRadius:1,bgcolor:e=>(0,se.X4)(e.palette.error.main,.08),"&:hover":{bgcolor:e=>(0,se.X4)(e.palette.error.main,.16)}},children:(0,P.jsx)(I.A,{width:18,icon:"solar:phone-bold"})}),(0,P.jsx)(f.A,{size:"small",color:"info",sx:{borderRadius:1,bgcolor:e=>(0,se.X4)(e.palette.info.main,.08),"&:hover":{bgcolor:e=>(0,se.X4)(e.palette.info.main,.16)}},children:(0,P.jsx)(I.A,{width:18,icon:"solar:chat-round-dots-bold"})}),(0,P.jsx)(f.A,{size:"small",color:"primary",sx:{borderRadius:1,bgcolor:e=>(0,se.X4)(e.palette.primary.main,.08),"&:hover":{bgcolor:e=>(0,se.X4)(e.palette.primary.main,.16)}},children:(0,P.jsx)(I.A,{width:18,icon:"fluent:mail-24-filled"})}),(0,P.jsx)(f.A,{size:"small",color:"secondary",sx:{borderRadius:1,bgcolor:e=>(0,se.X4)(e.palette.secondary.main,.08),"&:hover":{bgcolor:e=>(0,se.X4)(e.palette.secondary.main,.16)}},children:(0,P.jsx)(I.A,{width:18,icon:"solar:videocamera-record-bold"})})]})]})]})]})}function le(e){let{participants:n}=e;const[t,r]=(0,o.useState)(null),s=(0,re.C)(!0),i=(0,o.useCallback)((e=>{r(e)}),[]),a=n.length,l=(0,P.jsxs)(F.A,{onClick:s.onToggle,sx:{pl:2.5,pr:1.5,height:40,flexShrink:0,flexGrow:"unset",typography:"overline",color:"text.secondary",bgcolor:"background.neutral"},children:[(0,P.jsxs)(A.A,{component:"span",sx:{flexGrow:1},children:["In room (",a,")"]}),(0,P.jsx)(I.A,{width:16,icon:s.value?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill"})]}),c=(0,P.jsx)(S.A,{sx:{height:224},children:n.map((e=>(0,P.jsxs)(F.A,{onClick:()=>i(e),children:[(0,P.jsx)(E.A,{variant:e.status,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,P.jsx)(O.A,{alt:e.name,src:e.avatarUrl})}),(0,P.jsx)(z.A,{sx:{ml:2},primary:e.name,secondary:e.role,primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{noWrap:!0,component:"span",typography:"caption"}})]},e.id)))});return(0,P.jsxs)(P.Fragment,{children:[l,(0,P.jsx)("div",{children:(0,P.jsx)(te.A,{in:s.value,children:c})}),t&&(0,P.jsx)(ae,{participant:t,open:!!t,onClose:()=>{r(null)}})]})}function ce(e){let{participant:n}=e;const t=(0,re.C)(!0),{name:r,avatarUrl:o,role:s,address:a,phoneNumber:c,email:d}=n,h=(0,P.jsxs)(i.A,{alignItems:"center",sx:{py:5},children:[(0,P.jsx)(O.A,{alt:r,src:o,sx:{width:96,height:96,mb:2}}),(0,P.jsx)(l.A,{variant:"subtitle1",children:r}),(0,P.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",mt:.5},children:s})]}),p=(0,P.jsxs)(F.A,{onClick:t.onToggle,sx:{pl:2.5,pr:1.5,height:40,flexShrink:0,flexGrow:"unset",typography:"overline",color:"text.secondary",bgcolor:"background.neutral"},children:[(0,P.jsx)(A.A,{component:"span",sx:{flexGrow:1},children:"Information"}),(0,P.jsx)(I.A,{width:16,icon:t.value?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill"})]}),x=(0,P.jsxs)(i.A,{spacing:2,sx:{px:2,py:2.5,"& svg":{mr:1,flexShrink:0,color:"text.disabled"}},children:[(0,P.jsxs)(i.A,{direction:"row",children:[(0,P.jsx)(I.A,{icon:"mingcute:location-fill"}),(0,P.jsx)(l.A,{variant:"body2",children:a})]}),(0,P.jsxs)(i.A,{direction:"row",children:[(0,P.jsx)(I.A,{icon:"solar:phone-bold"}),(0,P.jsx)(l.A,{variant:"body2",children:c})]}),(0,P.jsxs)(i.A,{direction:"row",children:[(0,P.jsx)(I.A,{icon:"fluent:mail-24-filled"}),(0,P.jsx)(l.A,{variant:"body2",noWrap:!0,children:d})]})]});return(0,P.jsxs)(P.Fragment,{children:[h,p,(0,P.jsx)("div",{children:(0,P.jsx)(te.A,{in:t.value,children:x})})]})}var de=t(52157),he=t(72419);function pe(e){let{attachments:n}=e;const t=(0,re.C)(!0),r=n.length,o=(0,P.jsxs)(F.A,{disabled:!n.length,onClick:t.onToggle,sx:{pl:2.5,pr:1.5,height:40,flexShrink:0,flexGrow:"unset",typography:"overline",color:"text.secondary",bgcolor:"background.neutral"},children:[(0,P.jsxs)(A.A,{component:"span",sx:{flexGrow:1},children:["Attachments (",r,")"]}),(0,P.jsx)(I.A,{width:16,icon:(t.value?!n.length&&"eva:arrow-ios-forward-fill":"eva:arrow-ios-forward-fill")||"eva:arrow-ios-downward-fill"})]}),s=(0,P.jsx)(S.A,{sx:{px:2,py:2.5},children:n.map(((e,n)=>(0,P.jsxs)(i.A,{spacing:1.5,direction:"row",alignItems:"center",sx:{mb:2},children:[(0,P.jsx)(i.A,{alignItems:"center",justifyContent:"center",sx:{width:40,height:40,flexShrink:0,borderRadius:1,overflow:"hidden",position:"relative",backgroundColor:"background.neutral"},children:(0,P.jsx)(he.Ay,{imageView:!0,file:e.preview,onDownload:()=>console.info("DOWNLOAD"),sx:{width:28,height:28}})}),(0,P.jsx)(z.A,{primary:e.name,secondary:(0,de.uK)(e.createdAt),primaryTypographyProps:{noWrap:!0,typography:"body2"},secondaryTypographyProps:{mt:.25,noWrap:!0,component:"span",typography:"caption",color:"text.disabled"}})]},e.name+n)))});return(0,P.jsxs)(P.Fragment,{children:[o,(0,P.jsx)(A.A,{sx:{overflow:"hidden",height:t.value?1:0,transition:e=>e.transitions.create(["height"],{duration:e.transitions.duration.shorter})},children:s})]})}const xe=240;function ue(e){let{participants:n,conversation:t}=e;const r=(0,b.A)(),s=(0,C.Q)("up","lg"),{collapseDesktop:a,onCloseDesktop:l,onCollapseDesktop:c,openMobile:d,onOpenMobile:h,onCloseMobile:p}=_();(0,o.useEffect)((()=>{s||l()}),[l,s]);const x=(0,o.useCallback)((()=>{s?c():h()}),[s]),u=n.length>1,m=$()(ne()(t.messages.map((e=>e.attachments)))),v=(0,P.jsxs)(P.Fragment,{children:[u?(0,P.jsx)(le,{participants:n}):(0,P.jsx)(ce,{participant:n[0]}),(0,P.jsx)(pe,{attachments:m})]}),g=(0,P.jsx)(f.A,{onClick:x,sx:{top:12,right:0,zIndex:9,width:32,height:32,borderRight:0,position:"absolute",borderRadius:"12px 0 0 12px",boxShadow:r.customShadows.z8,bgcolor:r.palette.background.paper,border:"solid 1px ".concat(r.palette.divider),"&:hover":{bgcolor:r.palette.background.neutral},...s&&{...!a&&{right:xe}}},children:s?(0,P.jsx)(I.A,{width:16,icon:a?"eva:arrow-ios-back-fill":"eva:arrow-ios-forward-fill"}):(0,P.jsx)(I.A,{width:16,icon:"eva:arrow-ios-back-fill"})});return(0,P.jsxs)(A.A,{sx:{position:"relative"},children:[g,s?(0,P.jsx)(i.A,{sx:{height:1,flexShrink:0,width:xe,borderLeft:"solid 1px ".concat(r.palette.divider),transition:r.transitions.create(["width"],{duration:r.transitions.duration.shorter}),...a&&{width:0}},children:!a&&v}):(0,P.jsx)(j.Ay,{anchor:"right",open:d,onClose:p,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:xe}},children:v})]})}var me=t(91374);function ve(e){let{message:n,participants:t,onOpenLightbox:r}=e;const{user:o}=(0,h.E)(),{me:s,senderDetails:a,hasImage:c}=function(e){let{message:n,participants:t,currentUserId:r}=e;const o=t.find((e=>e.id===n.senderId)),s=n.senderId===r?{type:"me"}:{avatarUrl:null===o||void 0===o?void 0:o.avatarUrl,firstName:null===o||void 0===o?void 0:o.name.split(" ")[0]},i="me"===s.type;return{hasImage:"image"===n.contentType,me:i,senderDetails:s}}({message:n,participants:t,currentUserId:"".concat(null===o||void 0===o?void 0:o.id)}),{firstName:d,avatarUrl:p}=a,{body:x,createdAt:u}=n,m=(0,P.jsxs)(l.A,{noWrap:!0,variant:"caption",sx:{mb:1,color:"text.disabled",...!s&&{mr:"auto"}},children:[!s&&"".concat(d,",")," \xa0",(0,T.A)(new Date(u),{addSuffix:!0})]}),v=(0,P.jsx)(i.A,{sx:{p:1.5,minWidth:48,maxWidth:320,borderRadius:1,typography:"body2",bgcolor:"background.neutral",...s&&{color:"grey.800",bgcolor:"primary.lighter"},...c&&{p:0,bgcolor:"transparent"}},children:c?(0,P.jsx)(A.A,{component:"img",alt:"attachment",src:x,onClick:()=>r(x),sx:{minHeight:220,borderRadius:1.5,cursor:"pointer","&:hover":{opacity:.9}}}):x}),g=(0,P.jsxs)(i.A,{direction:"row",className:"message-actions",sx:{pt:.5,opacity:0,top:"100%",left:0,position:"absolute",transition:e=>e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter}),...s&&{left:"unset",right:0}},children:[(0,P.jsx)(f.A,{size:"small",children:(0,P.jsx)(I.A,{icon:"solar:reply-bold",width:16})}),(0,P.jsx)(f.A,{size:"small",children:(0,P.jsx)(I.A,{icon:"eva:smiling-face-fill",width:16})}),(0,P.jsx)(f.A,{size:"small",children:(0,P.jsx)(I.A,{icon:"solar:trash-bin-trash-bold",width:16})})]});return(0,P.jsxs)(i.A,{direction:"row",justifyContent:s?"flex-end":"unset",sx:{mb:5},children:[!s&&(0,P.jsx)(O.A,{alt:d,src:p,sx:{width:32,height:32,mr:2}}),(0,P.jsxs)(i.A,{alignItems:"flex-end",children:[m,(0,P.jsxs)(i.A,{direction:"row",alignItems:"center",sx:{position:"relative","&:hover":{"& .message-actions":{opacity:1}}},children:[v,g]})]})]})}function ge(e){let{messages:n=[],participants:t}=e;const{messagesEndRef:r}=function(e){const n=(0,o.useRef)(null),t=(0,o.useCallback)((()=>{e&&n.current&&n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[e]);return(0,o.useEffect)((()=>{t()}),[e]),{messagesEndRef:n}}(n),s=n.filter((e=>"image"===e.contentType)).map((e=>({src:e.body}))),i=(0,me.xk)(s);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(S.A,{ref:r,sx:{px:3,py:5,height:1},children:(0,P.jsx)(A.A,{children:n.map((e=>(0,P.jsx)(ve,{message:e,participants:t,onOpenLightbox:()=>i.onOpen(e.body)},e.id)))})}),(0,P.jsx)(me.Ay,{index:i.selected,slides:s,open:i.open,close:i.onClose})]})}var Ae=t(76664),je=t(52491);function be(e){let{recipients:n,onAddRecipients:t,disabled:r,selectedConversationId:s}=e;const a=(0,d.rd)(),{user:l}=(0,h.E)(),p=(0,o.useRef)(null),[x,v]=(0,o.useState)(""),g=(0,o.useMemo)((()=>({id:"".concat(null===l||void 0===l?void 0:l.id),role:"".concat(null===l||void 0===l?void 0:l.role),email:"".concat(null===l||void 0===l?void 0:l.email),address:"".concat(null===l||void 0===l?void 0:l.address),name:"".concat(null===l||void 0===l?void 0:l.displayName),lastActivity:new Date,avatarUrl:"".concat(null===l||void 0===l?void 0:l.photoURL),phoneNumber:"".concat(null===l||void 0===l?void 0:l.phoneNumber),status:"online"})),[l]),A=(0,o.useMemo)((()=>({id:(0,je.A)(),attachments:[],body:x,contentType:"text",createdAt:(0,Ae.A)(new Date,{minutes:1}),senderId:g.id})),[x,g.id]),j=(0,o.useMemo)((()=>({id:(0,je.A)(),messages:[A],participants:[...n,g],type:n.length>1?"GROUP":"ONE_TO_ONE",unreadCount:0})),[A,g,n]),b=(0,o.useCallback)((()=>{p.current&&p.current.click()}),[]),y=(0,o.useCallback)((e=>{v(e.target.value)}),[]),w=(0,o.useCallback)((async e=>{try{if("Enter"===e.key){if(x)if(s)await async function(e,n){const t=[m.vZ.chat,{params:{endpoint:"conversations"}}],r=[m.vZ.chat,{params:{conversationId:e,endpoint:"conversation"}}];(0,u.Tk)(r,(e=>{const{conversation:t}=e;return{conversation:{...t,messages:[...t.messages,n]}}}),!1),(0,u.Tk)(t,(t=>{const{conversations:r}=t;return{conversations:r.map((t=>t.id===e?{...t,messages:[...t.messages,n]}:t))}}),!1)}(s,A);else{const e=await async function(e){const n=[m.vZ.chat,{params:{endpoint:"conversations"}}],t={conversationData:e},r=await m.Ay.post(m.vZ.chat,t);return(0,u.Tk)(n,(n=>{const t=[...n.conversations,e];return{...n,conversations:t}}),!1),r.data}(j);a.push("".concat(c.f.dashboard.chat,"?id=").concat(e.conversation.id)),t([])}v("")}}catch(n){console.error(n)}}),[j,x,A,t,a,s]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(W.Ay,{value:x,onKeyUp:w,onChange:y,placeholder:"Type a message",disabled:r,startAdornment:(0,P.jsx)(f.A,{children:(0,P.jsx)(I.A,{icon:"eva:smiling-face-fill"})}),endAdornment:(0,P.jsxs)(i.A,{direction:"row",sx:{flexShrink:0},children:[(0,P.jsx)(f.A,{onClick:b,children:(0,P.jsx)(I.A,{icon:"solar:gallery-add-bold"})}),(0,P.jsx)(f.A,{onClick:b,children:(0,P.jsx)(I.A,{icon:"eva:attach-2-fill"})}),(0,P.jsx)(f.A,{children:(0,P.jsx)(I.A,{icon:"solar:microphone-bold"})})]}),sx:{px:1,height:56,flexShrink:0,borderTop:e=>"solid 1px ".concat(e.palette.divider)}}),(0,P.jsx)("input",{type:"file",ref:p,style:{display:"none"}})]})}var ye=t(86826);function fe(e){let{participants:n}=e;const t=n.length>1,r=n[0],o=(0,P.jsx)(R.A,{max:3,sx:{["& .".concat(ye.A.avatar)]:{width:32,height:32}},children:n.map((e=>(0,P.jsx)(O.A,{alt:e.name,src:e.avatarUrl},e.id)))}),s=(0,P.jsxs)(i.A,{flexGrow:1,direction:"row",alignItems:"center",spacing:2,children:[(0,P.jsx)(E.A,{variant:r.status,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,P.jsx)(O.A,{src:r.avatarUrl,alt:r.name})}),(0,P.jsx)(z.A,{primary:r.name,secondary:"offline"===r.status?(0,de.kH)(r.lastActivity):r.status,secondaryTypographyProps:{component:"span",..."offline"!==r.status&&{textTransform:"capitalize"}}})]});return(0,P.jsxs)(P.Fragment,{children:[t?o:s,(0,P.jsx)(i.A,{flexGrow:1}),(0,P.jsx)(f.A,{children:(0,P.jsx)(I.A,{icon:"solar:phone-bold"})}),(0,P.jsx)(f.A,{children:(0,P.jsx)(I.A,{icon:"solar:videocamera-record-bold"})}),(0,P.jsx)(f.A,{children:(0,P.jsx)(I.A,{icon:"eva:more-vertical-fill"})})]})}var we=t(26487),ke=t(8710);function Ce(e){let{contacts:n,onAddRecipients:t}=e;const[r,s]=(0,o.useState)(""),a=(0,o.useCallback)((e=>{s(""),t(e)}),[t]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(l.A,{variant:"subtitle2",sx:{color:"text.primary",mr:2},children:"To:"}),(0,P.jsx)(ke.A,{sx:{minWidth:320},multiple:!0,limitTags:3,popupIcon:null,defaultValue:[],disableCloseOnSelect:!0,noOptionsText:(0,P.jsx)(H.A,{query:r}),onChange:(e,n)=>a(n),onInputChange:(e,n)=>s(n),options:n,getOptionLabel:e=>e.name,isOptionEqualToValue:(e,n)=>e.id===n.id,renderInput:e=>(0,P.jsx)(y.A,{...e,placeholder:"+ Recipients"}),renderOption:(e,n,t)=>{let{selected:r}=t;return(0,o.createElement)("li",{...e,key:n.id},(0,P.jsxs)(A.A,{sx:{mr:1,width:32,height:32,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[(0,P.jsx)(O.A,{alt:n.name,src:n.avatarUrl,sx:{width:1,height:1}}),(0,P.jsx)(i.A,{alignItems:"center",justifyContent:"center",sx:{top:0,left:0,width:1,height:1,opacity:0,position:"absolute",bgcolor:e=>(0,se.X4)(e.palette.grey[900],.8),transition:e=>e.transitions.create(["opacity"],{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.shorter}),...r&&{opacity:1,color:"primary.main"}},children:(0,P.jsx)(I.A,{icon:"eva:checkmark-fill"})})]},n.id),n.name)},renderTags:(e,n)=>e.map(((e,t)=>(0,o.createElement)(we.A,{...n({index:t}),key:e.id,label:e.name,avatar:(0,P.jsx)(O.A,{alt:e.name,src:e.avatarUrl}),size:"small",variant:"soft"})))})]})}function Ie(){const e=(0,d.rd)(),{user:n}=(0,h.E)(),t=(0,g.Mp)(),r=(0,d.ok)().get("id")||"",[p,A]=(0,o.useState)([]),{contacts:j}=function(){const e=[m.vZ.chat,{params:{endpoint:"contacts"}}],{data:n,isLoading:t,error:r,isValidating:s}=(0,u.Ay)(e,m.GO,v);return(0,o.useMemo)((()=>({contacts:(null===n||void 0===n?void 0:n.contacts)||[],contactsLoading:t,contactsError:r,contactsValidating:s,contactsEmpty:!t&&!(null!==n&&void 0!==n&&n.contacts.length)})),[null===n||void 0===n?void 0:n.contacts,r,t,s])}(),{conversations:b,conversationsLoading:y}=function(){const e=[m.vZ.chat,{params:{endpoint:"conversations"}}],{data:n,isLoading:t,error:r,isValidating:s}=(0,u.Ay)(e,m.GO,v);return(0,o.useMemo)((()=>{const e=x()(null===n||void 0===n?void 0:n.conversations,"id")||{},o=Object.keys(e)||[];return{conversations:{byId:e,allIds:o},conversationsLoading:t,conversationsError:r,conversationsValidating:s,conversationsEmpty:!t&&!o.length}}),[null===n||void 0===n?void 0:n.conversations,r,t,s])}(),{conversation:f,conversationError:w}=function(e){const n=e?[m.vZ.chat,{params:{conversationId:e,endpoint:"conversation"}}]:"",{data:t,isLoading:r,error:s,isValidating:i}=(0,u.Ay)(n,m.GO,v);return(0,o.useMemo)((()=>({conversation:null===t||void 0===t?void 0:t.conversation,conversationLoading:r,conversationError:s,conversationValidating:i})),[null===t||void 0===t?void 0:t.conversation,s,r,i])}("".concat(r)),k=f?f.participants.filter((e=>e.id!=="".concat(null===n||void 0===n?void 0:n.id))):[];(0,o.useEffect)((()=>{!w&&r||e.push(c.f.dashboard.chat)}),[w,e,r]);const C=(0,o.useCallback)((e=>{A(e)}),[]),I=!!f,S=(0,P.jsx)(i.A,{direction:"row",alignItems:"center",flexShrink:0,sx:{pr:1,pl:2.5,py:1,minHeight:72},children:r?(0,P.jsx)(P.Fragment,{children:I&&(0,P.jsx)(fe,{participants:k})}):(0,P.jsx)(Ce,{contacts:j,onAddRecipients:C})}),_=(0,P.jsx)(Y,{contacts:j,conversations:b,loading:y,selectedConversationId:r}),T=(0,P.jsxs)(i.A,{sx:{width:1,height:1,overflow:"hidden"},children:[(0,P.jsx)(ge,{messages:null===f||void 0===f?void 0:f.messages,participants:k}),(0,P.jsx)(be,{recipients:p,onAddRecipients:C,selectedConversationId:r,disabled:!p.length&&!r})]});return(0,P.jsxs)(a.A,{maxWidth:!t.themeStretch&&"xl",children:[(0,P.jsx)(l.A,{variant:"h4",sx:{mb:{xs:3,md:5}},children:"Chat"}),(0,P.jsxs)(i.A,{component:s.A,direction:"row",sx:{height:"72vh"},children:[_,(0,P.jsxs)(i.A,{sx:{width:1,height:1,overflow:"hidden"},children:[S,(0,P.jsxs)(i.A,{direction:"row",sx:{width:1,height:1,overflow:"hidden",borderTop:e=>"solid 1px ".concat(e.palette.divider)},children:[T,I&&(0,P.jsx)(ue,{conversation:f,participants:k})]})]})]})]})}function Se(){return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.mg,{children:(0,P.jsx)("title",{children:" Game: Chat"})}),(0,P.jsx)(Ie,{})]})}},52491:(e,n,t)=>{"use strict";function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))}t.d(n,{A:()=>r})},46936:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(98587),o=t(58168),s=t(65043),i=(t(2086),t(58387)),a=t(68606),l=t(34535),c=t(72876),d=t(15294),h=t(60587),p=t(86826),x=t(70579);const u=["children","className","component","componentsProps","max","renderSurplus","slotProps","spacing","total","variant"],m={small:-16,medium:null},v=(0,l.Ay)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,n)=>(0,o.A)({["& .".concat(p.A.avatar)]:n.avatar},n.root)})((e=>{let{theme:n,ownerState:t}=e;const r=t.spacing&&void 0!==m[t.spacing]?m[t.spacing]:-t.spacing;return{["& .".concat(d.A.root)]:{border:"2px solid ".concat((n.vars||n).palette.background.default),boxSizing:"content-box",marginLeft:null!=r?r:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}})),g=s.forwardRef((function(e,n){var t;const l=(0,c.A)({props:e,name:"MuiAvatarGroup"}),{children:d,className:m,component:g="div",componentsProps:A={},max:j=5,renderSurplus:b,slotProps:y={},spacing:f="medium",total:w,variant:k="circular"}=l,C=(0,r.A)(l,u);let I=j<2?2:j;const S=(0,o.A)({},l,{max:j,spacing:f,component:g,variant:k}),_=(e=>{const{classes:n}=e;return(0,a.A)({root:["root"],avatar:["avatar"]},p.n,n)})(S),T=s.Children.toArray(d).filter((e=>s.isValidElement(e))),E=w||T.length;E===I&&(I+=1),I=Math.min(E+1,I);const O=Math.min(T.length,I-1),R=Math.max(E-I,E-O,0),z=b?b(R):"+".concat(R),F=null!=(t=y.additionalAvatar)?t:A.additionalAvatar;return(0,x.jsxs)(v,(0,o.A)({as:g,ownerState:S,className:(0,i.A)(_.root,m),ref:n},C,{children:[R?(0,x.jsx)(h.A,(0,o.A)({variant:k},F,{className:(0,i.A)(_.avatar,null==F?void 0:F.className),children:z})):null,T.slice(0,O).reverse().map((e=>s.cloneElement(e,{className:(0,i.A)(e.props.className,_.avatar),variant:e.props.variant||k})))]}))}))},5537:(e,n,t)=>{"use strict";t.d(n,{x:()=>c});var r=t(65043),o=t(47042),s=t(24626),i=t(22144),a=t(70579);function l(e){return e.substring(2).toLowerCase()}function c(e){const{children:n,disableReactTree:t=!1,mouseEvent:c="onClick",onClickAway:d,touchEvent:h="onTouchEnd"}=e,p=r.useRef(!1),x=r.useRef(null),u=r.useRef(!1),m=r.useRef(!1);r.useEffect((()=>(setTimeout((()=>{u.current=!0}),0),()=>{u.current=!1})),[]);const v=(0,o.A)(n.ref,x),g=(0,s.A)((e=>{const n=m.current;m.current=!1;const r=(0,i.A)(x.current);if(!u.current||!x.current||"clientX"in e&&function(e,n){return n.documentElement.clientWidth<e.clientX||n.documentElement.clientHeight<e.clientY}(e,r))return;if(p.current)return void(p.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(x.current)>-1:!r.documentElement.contains(e.target)||x.current.contains(e.target),o||!t&&n||d(e)})),A=e=>t=>{m.current=!0;const r=n.props[e];r&&r(t)},j={ref:v};return!1!==h&&(j[h]=A(h)),r.useEffect((()=>{if(!1!==h){const e=l(h),n=(0,i.A)(x.current),t=()=>{p.current=!0};return n.addEventListener(e,g),n.addEventListener("touchmove",t),()=>{n.removeEventListener(e,g),n.removeEventListener("touchmove",t)}}}),[g,h]),!1!==c&&(j[c]=A(c)),r.useEffect((()=>{if(!1!==c){const e=l(c),n=(0,i.A)(x.current);return n.addEventListener(e,g),()=>{n.removeEventListener(e,g)}}}),[g,c]),(0,a.jsx)(r.Fragment,{children:r.cloneElement(n,j)})}},80755:(e,n,t)=>{var r=t(48895),o=t(77116);e.exports=function e(n,t,s,i,a){var l=-1,c=n.length;for(s||(s=o),a||(a=[]);++l<c;){var d=n[l];t>0&&s(d)?t>1?e(d,t-1,s,i,a):r(a,d):i||(a[a.length]=d)}return a}},77116:(e,n,t)=>{var r=t(9812),o=t(22777),s=t(54052),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||o(e)||!!(i&&e&&e[i])}},20819:(e,n,t)=>{var r=t(80755);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}}}]);
//# sourceMappingURL=713.ea1cd0c4.chunk.js.map