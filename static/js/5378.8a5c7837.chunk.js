"use strict";(self.webpackChunktelyza=self.webpackChunktelyza||[]).push([[5378],{25378:(e,n,t)=>{t.r(n),t.d(n,{default:()=>oe});var a=t(49367),s=t(65043),o=t(73216),l=t(40360),i=t(81776),r=t(19252),d=t(21809),c=t(77628),u=t(2771),p=t(80899),m=t(24858),h=t(18403),x=t(96446),v=t(12110),j=t(88911),y=t(22075),A=t(38246),w=t(20144),f=t(30291),g=t(38699),b=t(70579);function _(){const{enqueueSnackbar:e}=(0,f.dh)(),{t:n}=(0,d.WD)(),{user:t,update:a}=(0,w.Z)(),o=p.Ik().shape({phone:p.Yj().required("le t\xe9l\xe9phone est requis"),first_name:p.Yj().required("Le pr\xe9nom est requis"),last_name:p.Yj().required("Le nom de famille est requis")}),l={phone:(null===t||void 0===t?void 0:t.phone)||"",first_name:(null===t||void 0===t?void 0:t.first_name)||"",last_name:(null===t||void 0===t?void 0:t.last_name)||"",email:(null===t||void 0===t?void 0:t.email)||"",photo:(null===t||void 0===t?void 0:t.photo)||null,description:(null===t||void 0===t?void 0:t.description)||""},[i,r]=(0,s.useState)(!1),c=(0,m.mN)({resolver:(0,h.t)(o),defaultValues:l}),{setValue:u,handleSubmit:_,formState:{isSubmitting:C}}=c,k=_((async n=>{try{const t=new FormData;t.append("phone",n.phone),!0===i&&t.append("photo",n.photo),t.append("first_name",n.first_name),t.append("last_name",n.last_name),t.append("email",n.email),t.append("description",n.description),await a(t),e("Update success!")}catch(r){var t,s,o,l;const n="string"===typeof(null===r||void 0===r||null===(t=r.response)||void 0===t?void 0:t.data)?null===r||void 0===r||null===(s=r.response)||void 0===s?void 0:s.data:null===r||void 0===r||null===(o=r.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.non_field_errors[0];console.error(r),e(n,{variant:"error"})}}));(0,s.useCallback)((e=>{const n=e[0];n&&u("photo",Object.assign(n,{preview:URL.createObjectURL(n)})),r(!0)}),[u]);return(0,b.jsx)(g.Ay,{methods:c,onSubmit:k,children:(0,b.jsx)(y.A,{container:!0,spacing:3,children:(0,b.jsx)(y.A,{xs:12,md:8,children:(0,b.jsxs)(v.A,{sx:{p:3},children:[(0,b.jsxs)(x.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,b.jsx)(g.nU,{name:"phone",label:n("layout.phone"),disabled:!0}),(0,b.jsx)(g.o3,{name:"first_name",label:n("layout.first_name")}),(0,b.jsx)(g.o3,{name:"last_name",label:n("layout.last_name")}),(0,b.jsx)(g.o3,{name:"email",label:n("layout.email")})]}),(0,b.jsxs)(j.A,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:[(0,b.jsx)(g.o3,{name:"description",multiline:!0,rows:4,label:n("layout.about")}),(0,b.jsx)(A.A,{type:"submit",variant:"contained",loading:C,children:n("layout.save_info")})]})]})})})})}var C=t(68362),k=t(28042),I=t(85601),S=t(39336),P=t(94496),N=t(79958),L=t(18303),W=t(70219),T=t(2358);function D(e){let{wallet:n}=e;const t=(0,C.wA)(),{t:a}=(0,d.WD)(),{enqueueSnackbar:o}=(0,f.dh)(),l=(0,L.C)(),i=(0,L.C)(),r=(0,L.C)(),[u,p]=(0,s.useState)(""),m=(0,s.useCallback)((async e=>{try{const n=await(0,k.dr)({method:e.paymentMethod,amount:e.amount});n.redirect_url?(p(n.redirect_url),r.onTrue()):(alert("Failed to initiate payment"),p(""))}catch(i){var n,t,a,s,l;console.error("Error initiating payment:",null===i||void 0===i||null===(n=i.response)||void 0===n?void 0:n.data);const e="string"===typeof(null===i||void 0===i||null===(t=i.response)||void 0===t?void 0:t.data)?null===i||void 0===i||null===(a=i.response)||void 0===a?void 0:a.data:null===i||void 0===i||null===(s=i.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.non_field_errors[0];o(e,{variant:"error"}),p("")}}),[]),h=(0,s.useCallback)((async e=>{try{await(0,k.GK)({method:e.paymentMethod,amount:e.amount,pin:e.pin,phoneNumber:e.phoneNumber}),await t((0,k.QI)()),o(a("wallet.withdraw_success"))}catch(r){var n,s,l,i;console.error("Error initiating withdraw:",r);const e="string"===typeof(null===r||void 0===r||null===(n=r.response)||void 0===n?void 0:n.data)?null===r||void 0===r||null===(s=r.response)||void 0===s?void 0:s.data:null===r||void 0===r||null===(l=r.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.non_field_errors[0];o(e,{variant:"error"}),p("")}}),[]);return(0,b.jsxs)(v.A,{children:[(0,b.jsx)(N.A,{title:a("wallet.wallet")}),(0,b.jsx)(j.A,{spacing:3,sx:{px:3,py:1},children:(0,b.jsxs)(P.A,{variant:"h4",children:[(0,W.KZ)(null===n||void 0===n?void 0:n.balance)," HTG"]})}),(0,b.jsx)(S.A,{sx:{borderStyle:"dashed"}}),(0,b.jsxs)(j.A,{spacing:1.5,direction:"row",justifyContent:"flex-end",sx:{p:3},children:[(0,b.jsx)(I.A,{onClick:l.onTrue,variant:"contained",color:"primary",startIcon:(0,b.jsx)(c.A,{width:20,icon:"majesticons:money-plus-line"}),children:a("wallet.deposit")}),(0,b.jsx)(I.A,{onClick:i.onTrue,variant:"outlined",color:"secondary",startIcon:(0,b.jsx)(c.A,{width:20,icon:"majesticons:money-minus-line"}),children:a("wallet.withdraw")})]}),(0,b.jsx)(T.dA,{open:l.value,onClose:l.onFalse,onCreate:m}),(0,b.jsx)(T.vO,{open:i.value,onClose:i.onFalse,onCreate:h}),(0,b.jsx)(T.$h,{paymentUrl:u,open:r.value,onClose:r.onFalse})]})}var E=t(94814),R=t(17642),q=t(78632),G=t(26353),O=t(24629),F=t(52157);const U=["ALL","DEPOSIT","WITHDRAW","TRANSFER","PLAY","MISTAKE","PAYWINNER","REFUND","INTEREST"];function Y(e){let{transactions:n}=e;const t=(0,L.C)(),{t:a}=(0,d.WD)(),[o,l]=(0,s.useState)("ALL"),i=n.filter((e=>"ALL"===o||e.type_transaction===o));return(0,b.jsxs)(v.A,{children:[(0,b.jsx)(N.A,{title:a("wallet.my_transactions")}),(0,b.jsxs)(j.A,{spacing:1.5,sx:{px:3,pt:3},children:[(0,b.jsxs)(q.A,{sx:{mb:3,minWidth:120},children:[(0,b.jsx)(R.A,{id:"transaction-filter-label",children:a("layout.filter_by")}),(0,b.jsx)(O.A,{labelId:"transaction-filter-label",id:"transaction-filter",value:o,onChange:e=>{const n=e.target.value;l(n)},label:a("layout.filter_by"),children:U.map((e=>(0,b.jsx)(E.A,{value:e,children:a("transaction_filter.".concat(e))},e)))})]}),(t.value?i:i.slice(0,8)).map((e=>(0,b.jsxs)(j.A,{direction:"row",alignItems:"center",children:[(0,b.jsx)(G.A,{primary:e.ref_code,secondary:(0,F.ts)(e.created_on),primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption",color:"text.disabled"}}),(0,b.jsx)(P.A,{variant:"body2",sx:{textAlign:"right",mr:5},children:(0,W.KZ)(e.amount)}),(0,b.jsx)(P.A,{variant:"body2",sx:{textAlign:"right",mr:5},children:a("transaction_filter.".concat(e.type_transaction))})]},e.id))),(0,b.jsx)(S.A,{sx:{borderStyle:"dashed"}})]}),(0,b.jsx)(j.A,{alignItems:"flex-start",sx:{p:2},children:(0,b.jsx)(I.A,{size:"small",color:"inherit",startIcon:(0,b.jsx)(c.A,{icon:t.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),onClick:t.onToggle,children:t.value?"Show Less":"Show More"})})]})}function K(){const e=(0,C.wA)(),{wallet:n,transactions:t}=(0,C.d4)((e=>e.wallet));return(0,s.useEffect)((()=>{e((0,k.QI)()),e((0,k.I0)())}),[e]),(0,b.jsxs)(y.A,{container:!0,spacing:3,disableEqualOverflow:!0,children:[(0,b.jsx)(y.A,{xs:12,md:4,children:(0,b.jsx)(D,{wallet:n})}),(0,b.jsx)(y.A,{xs:12,md:8,children:(0,b.jsx)(Y,{transactions:t})})]})}var Z=t(68903),M=t(34535),z=t(26240),B=t(26487),V=t(48615);const H=(0,M.Ay)(v.A)((e=>{let{theme:n}=e;return{padding:16,background:"white",borderRadius:13,flexDirection:"column",justifyContent:"flex-start",gap:4,display:"flex",marginBottom:n.spacing(3)}})),Q=(0,M.Ay)(B.A)((e=>{let{theme:n}=e;return{fontWeight:n.typography.fontWeightBold,padding:n.spacing(.5,2)}})),$=(e,n)=>{switch(e){case"WIN":return{backgroundColor:n.palette.success.main,color:n.palette.common.white};case"WRONG":return{backgroundColor:n.palette.error.main,color:n.palette.common.white};case"PENDING":return{backgroundColor:n.palette.warning.main,color:n.palette.common.white};default:return{backgroundColor:n.palette.grey[400],color:n.palette.common.white}}};function J(){const e=(0,C.wA)(),{t:n}=(0,d.WD)(),{tickets_casino:t}=(0,C.d4)((e=>e.ticket)),[a,o]=(0,s.useState)("ALL");(0,s.useEffect)((()=>{e((0,V.oP)())}),[e]);const l="ALL"===a?t:t.filter((e=>e.status===a));return(0,b.jsxs)(Z.Ay,{container:!0,spacing:3,children:[(0,b.jsx)(Z.Ay,{item:!0,xs:12,md:8,children:(0,b.jsxs)(q.A,{variant:"outlined",fullWidth:!0,children:[(0,b.jsx)(R.A,{children:n("layout.status_filter")}),(0,b.jsxs)(O.A,{value:a,onChange:e=>{o(e.target.value)},label:n("layout.status_filter"),children:[(0,b.jsx)(E.A,{value:"ALL",children:n("status_filter.ALL")}),(0,b.jsx)(E.A,{value:"WIN",children:n("status_filter.WIN")}),(0,b.jsx)(E.A,{value:"WRONG",children:n("status_filter.WRONG")}),(0,b.jsx)(E.A,{value:"PENDING",children:n("status_filter.PENDING")})]})]})}),(0,b.jsx)(Z.Ay,{item:!0,xs:12,md:8,children:l.map((e=>(0,b.jsx)(j.A,{children:(0,b.jsx)(X,{ticket:e})},e.id)))})]})}function X(e){let{ticket:n}=e;const t=(0,z.A)(),{t:a}=(0,d.WD)();return(0,b.jsxs)(H,{children:[(0,b.jsxs)(x.A,{display:"flex",justifyContent:"space-between",children:[(0,b.jsxs)(x.A,{display:"flex",alignItems:"center",children:[(0,b.jsx)(c.A,{icon:"fluent-emoji-flat:ticket",width:30,height:30,sx:{marginRight:2}}),(0,b.jsxs)(x.A,{children:[(0,b.jsx)(P.A,{variant:"h6",component:"div",children:n.game_name}),(0,b.jsx)(P.A,{variant:"subtitle1",color:"textSecondary",children:n.ref_code})]})]}),(0,b.jsx)(x.A,{display:"flex",alignItems:"center",children:(0,b.jsx)(Q,{label:a("status_filter.".concat(n.status)),style:$(n.status,t),sx:{mr:2}})})]}),(0,b.jsx)(P.A,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:new Date(n.created_on).toLocaleString()}),(0,b.jsx)(x.A,{mt:2,children:(0,b.jsxs)(x.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,b.jsxs)(P.A,{variant:"body2",children:[a("betslip.mise_total"),": ",(0,W.KZ)(n.mise)]}),(0,b.jsxs)(P.A,{variant:"body2",children:[a("betslip.gain_potentiel"),": ",(0,W.KZ)(n.gain)]})]})})]})}var ee=t(71716),ne=t(51787),te=t(63132);function ae(){const{enqueueSnackbar:e}=(0,f.dh)(),{t:n}=(0,d.WD)(),t=(0,L.C)(),a=p.Ik().shape({oldPassword:p.Yj().required("Old Password is required"),newPassword:p.Yj().required("New Password is required").min(6,"Password must be at least 6 characters").test("no-match","New password must be different than old password",((e,n)=>{let{parent:t}=n;return e!==t.oldPassword})),confirmNewPassword:p.Yj().oneOf([p.KR("newPassword")],"Passwords must match")}),s=(0,m.mN)({resolver:(0,h.t)(a),defaultValues:{oldPassword:"",newPassword:"",confirmNewPassword:""}}),{reset:o,handleSubmit:l,formState:{isSubmitting:i}}=s,r=l((async n=>{try{await te.Ay.put(te.vZ.auth.update_password,n),o(),e("Update success!")}catch(i){var t,a,s,l;const n="string"===typeof(null===i||void 0===i||null===(t=i.response)||void 0===t?void 0:t.data)?null===i||void 0===i||null===(a=i.response)||void 0===a?void 0:a.data:null===i||void 0===i||null===(s=i.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.non_field_errors[0];console.error(i),e(n,{variant:"error"})}}));return(0,b.jsx)(g.Ay,{methods:s,onSubmit:r,children:(0,b.jsxs)(j.A,{component:v.A,spacing:3,sx:{p:3},children:[(0,b.jsx)(g.o3,{name:"oldPassword",type:t.value?"text":"password",label:n("layout.oldpassword"),InputProps:{endAdornment:(0,b.jsx)(ne.A,{position:"end",children:(0,b.jsx)(ee.A,{onClick:t.onToggle,edge:"end",children:(0,b.jsx)(c.A,{icon:t.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),(0,b.jsx)(g.o3,{name:"newPassword",label:n("layout.newpassword"),type:t.value?"text":"password",InputProps:{endAdornment:(0,b.jsx)(ne.A,{position:"end",children:(0,b.jsx)(ee.A,{onClick:t.onToggle,edge:"end",children:(0,b.jsx)(c.A,{icon:t.value?"solar:eye-bold":"solar:eye-closed-bold"})})})},helperText:(0,b.jsxs)(j.A,{component:"span",direction:"row",alignItems:"center",children:[(0,b.jsx)(c.A,{icon:"eva:info-fill",width:16,sx:{mr:.5}})," ",n("layout.password_notice")]})}),(0,b.jsx)(g.o3,{name:"confirmNewPassword",type:t.value?"text":"password",label:n("layout.comfirmpassword"),InputProps:{endAdornment:(0,b.jsx)(ne.A,{position:"end",children:(0,b.jsx)(ee.A,{onClick:t.onToggle,edge:"end",children:(0,b.jsx)(c.A,{icon:t.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),(0,b.jsx)(A.A,{type:"submit",variant:"contained",loading:i,sx:{ml:"auto"},children:n("layout.save_change")})]})})}function se(){const{t:e}=(0,d.WD)(),n=[{value:"ticket",label:e("layout.my_bets"),icon:(0,b.jsx)(c.A,{icon:"twemoji:admission-tickets",width:24})},{value:"transaction",label:e("wallet.my_transactions"),icon:(0,b.jsx)(c.A,{icon:"grommet-icons:transaction",width:24})},{value:"general",label:e("layout.my_infos"),icon:(0,b.jsx)(c.A,{icon:"solar:user-id-bold",width:24})},{value:"security",label:e("layout.change_password"),icon:(0,b.jsx)(c.A,{icon:"ic:round-vpn-key",width:24})}],t=(0,u.Mp)(),a=(0,o.zy)(),p=(0,o.Zp)(),m=new URLSearchParams(a.search).get("menu"),[h,x]=(0,s.useState)(m||"transaction");(0,s.useEffect)((()=>{p("?menu=".concat(m),{replace:!0})}),[m]);const v=(0,s.useCallback)(((e,n)=>{x(n),p("?menu=".concat(n))}),[p]);return(0,b.jsxs)(r.A,{maxWidth:!t.themeStretch&&"lg",children:[(0,b.jsx)(i.A,{value:h,onChange:v,sx:{mb:{xs:3,md:5}},children:n.map((e=>(0,b.jsx)(l.A,{label:e.label,icon:e.icon,value:e.value},e.value)))}),"general"===h&&(0,b.jsx)(_,{}),"ticket"===h&&(0,b.jsx)(J,{}),"transaction"===h&&(0,b.jsx)(K,{}),"security"===h&&(0,b.jsx)(ae,{})]})}function oe(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.mg,{children:(0,b.jsx)("title",{children:" Game: Account Settings"})}),(0,b.jsx)(se,{})]})}}}]);
//# sourceMappingURL=5378.8a5c7837.chunk.js.map